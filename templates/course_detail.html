{% extends 'base.html' %}

{% block title %}Course Details - {{ course.name }}{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="row mt-3">
        <div class="col">
            <h2 style="color: var(--bc-maroon);">{{ course.name }}</h2>
            <p><strong>Description:</strong> {{ course.description }}</p>
            <p><strong>Professor:</strong> {{ course.professor.real_name }}</p>
        </div>
    </div>

    <div class="row mt-4">
        <div class="col">
            <h4 style="color: var(--bc-maroon);">Enrolled Students:</h4>
            {% if course.students.count > 0 %}
            <ul>
                {% for student in course.students.all %}
                <li>{{ student.real_name }} - {{ student.email }}</li>
                {% endfor %}
            </ul>
            {% else %}
            <p>No students enrolled in this course yet.</p>
            {% endif %}
        </div>
    </div>

    <div class="row mt-4">
        <div class="col">
            <h4 style="color: var(--bc-maroon);">Assessments:</h4>
            {% if course.assessments.count > 0 %}
            <table class="table table-striped table-bordered">
                <thead class="table-dark">
                    <tr>
                        <th>ID</th>
                        <th>Title</th>
                        <th>Due Date</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for assessment in course.assessments.all %}
                    <tr>
                        <td>{{ assessment.id }}</td>
                        <td>{{ assessment.title }}</td>
                        <td>{{ assessment.due_date|date:"Y-m-d" }}</td>
                        <td>
                            <a href="{% url 'view_assessment' assessment.id %}" class="view-btn">View Details</a>
                            <a href="{% url 'submit_assessment' assessment.id %}" class="btn btn-success">Submit Assessment</a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            {% else %}
            <p>No assessments available for this course.</p>
            {% endif %}
        </div>
    </div>

    <div class="row mt-4">
        <div class="col">
            <a href="{% url 'edit_course' course.id %}" class="btn gold-btn">Edit Course</a>
        </div>
    </div>
</div>
{% endblock %}
