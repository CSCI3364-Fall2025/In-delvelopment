{% extends 'base.html' %}

{% block title %}Edit Course | {{ course.name }}{% endblock %}

{% block content %}
<div class="container">
    <div class="row mt-3 justify-content-between">
        <div class="col-auto">
            <h2>Edit Course - {{ course.course_code }}: {{ course.name }}</h2>
        </div>
          
    </div>
    <div class="row m-3 p-3 border shadow rounded justify-content-between">
        <div class="row mb-3">
            <div class="col-auto">
                <h4>Course Information:</h4>
            </div>
            
        </div>
        <form action="" method="post">
            {% csrf_token %}
            <div class="row m-2">
                <label for="courseName" class="form-label fw-bold">Course Name:</label>
                <input type="text" class="form-control" id="courseName" name="courseName" placeholder="e.g. Introduction to Tomfoolery" value="{{ course.name }}" required>
            </div>
            <div class="row m-2">
                <label for="courseCode" class="form-label fw-bold">Course Code:</label>
                <input type="text" class="form-control" id="courseCode" name="courseCode" placeholder="e.g. TOMF1101" value="{{ course.course_code }}" required>
            </div>
            <div class="row m-2">
                <label for="year" class="form-label fw-bold">Year:</label>
                <select name="year" id="year" class="form-select" required>
                    <option value="2024" {% if course.year == '2024' %}selected{% endif %}>2024</option>
                    <option value="2025" {% if course.year == '2025' %}selected{% endif %}>2025</option>
                </select>
            </div>
            <div class="row m-2">
                <label for="semester" class="form-label fw-bold">Semester:</label>
                <select name="semester" id="semester" class="form-select" required>
                    <option value="fall" {% if course.semester == 'fall' %}selected{% endif %}>Fall</option>
                    <option value="spring" {% if course.semester == 'spring' %}selected{% endif %}>Spring</option>
                </select>
            </div>
            
            <div class="row m-2">
                <label for="description" class="form-label fw-bold">Description:</label>
                <textarea name="description" id="description" placeholder="Enter a brief course description here" class="form-control" required>{{ course.description }}</textarea>
            </div>
            <br>
            <div class="row mt-5 justify-content-start">
                <div class="col-auto">
                    <h3>Update Course:</h3>
                </div>
                <div class="col">
                    <h6 class="fw-lighter"><i>Click <b>'Update'</b> to update the course with these details or click <b>'De-Activate Course'</b> to permanently de-activate the course.</i>
                    </h6>
                </div>
                <div class="col-auto align-self-center">
                    <a href="{% url 'view_course' course.name course.id %}" class="btn btn-secondary rounded-pill">Cancel</a>
                </div>
                <div class="col-auto">
                    <!-- Button trigger modal -->
                    <button type="button" class="btn btn-lg btn-danger" data-bs-toggle="modal" data-bs-target="#deactivateCourseModal">De-Activate Course</button>
                </div>
                <div class="col-auto">
                    <button class="btn btn-lg gold-btn" type="submit">Update Course</button>
                </div>
            </div>
        </form>
    </div>
</div>
<!-- Modal -->
<div class="modal fade" id="deactivateCourseModal" tabindex="-1" aria-labelledby="DeleteCourseModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="exampleModalLabel">Delete Team</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          Are you sure you want to delete this course? <b style="color: red;"><i>Warning: This action cannot be undone!</i></b>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <a href="{% url 'delete_course' course.pk %}" class="btn btn-danger">Delete Course</a>
        </div>
      </div>
    </div>
  </div>
{% endblock %}